"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const ava_1 = require("ava");
const fs = require("fs-extra");
const path = require("path");
const denali_cli_1 = require("denali-cli");
ava_1.default.beforeEach('generate an action to destroy', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let generate = new denali_cli_1.CommandAcceptanceTest('generate action foobar', { name: 'destroy-command' });
    t.context.dir = generate.dir;
    t.context.generatedFilepath = path.join(generate.dir, 'app', 'actions', 'foobar.js');
    yield generate.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
ava_1.default('destroys a blueprint', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_cli_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    yield destroy.run();
    t.false(fs.existsSync(t.context.generatedFilepath), 'file should be removed');
}));
ava_1.default('skips modified files', (t) => tslib_1.__awaiter(this, void 0, void 0, function* () {
    let destroy = new denali_cli_1.CommandAcceptanceTest('destroy action foobar', { dir: t.context.dir, populateWithDummy: false });
    fs.appendFileSync(t.context.generatedFilepath, 'foobar');
    yield destroy.run();
    t.true(fs.existsSync(t.context.generatedFilepath), 'file should be generated');
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVzdHJveS10ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9zZWF3YXR0cy9zcmMvZ2l0aHViLmNvbS9zZWF3YXR0cy9kZW5hbGkvIiwic291cmNlcyI6WyJ0ZXN0L2FjY2VwdGFuY2UvY29tbWFuZHMvZGVzdHJveS10ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZCQUF1QjtBQUN2QiwrQkFBK0I7QUFDL0IsNkJBQTZCO0FBQzdCLDJDQUFtRDtBQUduRCxhQUFJLENBQUMsVUFBVSxDQUFDLCtCQUErQixFQUFFLENBQU8sQ0FBQztJQUN2RCxJQUFJLFFBQVEsR0FBRyxJQUFJLGtDQUFxQixDQUFDLHdCQUF3QixFQUFFLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLENBQUMsQ0FBQztJQUNoRyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDO0lBQzdCLENBQUMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDckYsTUFBTSxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO0FBQ2pGLENBQUMsQ0FBQSxDQUFDLENBQUM7QUFFSCxhQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBTyxDQUFDO0lBQ25DLElBQUksT0FBTyxHQUFHLElBQUksa0NBQXFCLENBQUMsdUJBQXVCLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUVuSCxNQUFNLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLHdCQUF3QixDQUFDLENBQUM7QUFDaEYsQ0FBQyxDQUFBLENBQUMsQ0FBQztBQUVILGFBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFPLENBQUM7SUFDbkMsSUFBSSxPQUFPLEdBQUcsSUFBSSxrQ0FBcUIsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ25ILEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUV6RCxNQUFNLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDakYsQ0FBQyxDQUFBLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0ZXN0IGZyb20gJ2F2YSc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgQ29tbWFuZEFjY2VwdGFuY2VUZXN0IH0gZnJvbSAnZGVuYWxpLWNsaSc7XG5cblxudGVzdC5iZWZvcmVFYWNoKCdnZW5lcmF0ZSBhbiBhY3Rpb24gdG8gZGVzdHJveScsIGFzeW5jICh0KSA9PiB7XG4gIGxldCBnZW5lcmF0ZSA9IG5ldyBDb21tYW5kQWNjZXB0YW5jZVRlc3QoJ2dlbmVyYXRlIGFjdGlvbiBmb29iYXInLCB7IG5hbWU6ICdkZXN0cm95LWNvbW1hbmQnIH0pO1xuICB0LmNvbnRleHQuZGlyID0gZ2VuZXJhdGUuZGlyO1xuICB0LmNvbnRleHQuZ2VuZXJhdGVkRmlsZXBhdGggPSBwYXRoLmpvaW4oZ2VuZXJhdGUuZGlyLCAnYXBwJywgJ2FjdGlvbnMnLCAnZm9vYmFyLmpzJyk7XG4gIGF3YWl0IGdlbmVyYXRlLnJ1bigpO1xuICB0LnRydWUoZnMuZXhpc3RzU3luYyh0LmNvbnRleHQuZ2VuZXJhdGVkRmlsZXBhdGgpLCAnZmlsZSBzaG91bGQgYmUgZ2VuZXJhdGVkJyk7XG59KTtcblxudGVzdCgnZGVzdHJveXMgYSBibHVlcHJpbnQnLCBhc3luYyAodCkgPT4ge1xuICBsZXQgZGVzdHJveSA9IG5ldyBDb21tYW5kQWNjZXB0YW5jZVRlc3QoJ2Rlc3Ryb3kgYWN0aW9uIGZvb2JhcicsIHsgZGlyOiB0LmNvbnRleHQuZGlyLCBwb3B1bGF0ZVdpdGhEdW1teTogZmFsc2UgfSk7XG5cbiAgYXdhaXQgZGVzdHJveS5ydW4oKTtcbiAgdC5mYWxzZShmcy5leGlzdHNTeW5jKHQuY29udGV4dC5nZW5lcmF0ZWRGaWxlcGF0aCksICdmaWxlIHNob3VsZCBiZSByZW1vdmVkJyk7XG59KTtcblxudGVzdCgnc2tpcHMgbW9kaWZpZWQgZmlsZXMnLCBhc3luYyAodCkgPT4ge1xuICBsZXQgZGVzdHJveSA9IG5ldyBDb21tYW5kQWNjZXB0YW5jZVRlc3QoJ2Rlc3Ryb3kgYWN0aW9uIGZvb2JhcicsIHsgZGlyOiB0LmNvbnRleHQuZGlyLCBwb3B1bGF0ZVdpdGhEdW1teTogZmFsc2UgfSk7XG4gIGZzLmFwcGVuZEZpbGVTeW5jKHQuY29udGV4dC5nZW5lcmF0ZWRGaWxlcGF0aCwgJ2Zvb2JhcicpO1xuXG4gIGF3YWl0IGRlc3Ryb3kucnVuKCk7XG4gIHQudHJ1ZShmcy5leGlzdHNTeW5jKHQuY29udGV4dC5nZW5lcmF0ZWRGaWxlcGF0aCksICdmaWxlIHNob3VsZCBiZSBnZW5lcmF0ZWQnKTtcbn0pO1xuIl19