"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const denali_cli_1 = require("denali-cli");
const moment = require("moment");
const assert = require("assert");
/**
 * Generates a database schema migration
 *
 * @package blueprints
 */
class MigrationBlueprint extends denali_cli_1.Blueprint {
    locals(argv) {
        let name = argv.name;
        assert(name, 'You must provide a name for this migration');
        let filename = `${moment().format('X')}-${name}`;
        return { name, filename };
    }
}
/* tslint:disable:completed-docs typedef */
MigrationBlueprint.blueprintName = 'migration';
MigrationBlueprint.description = 'Generates a database schema migration';
MigrationBlueprint.longDescription = denali_cli_1.unwrap `
    Usage: denali generate migration <name> [options]

    Generates a new blank migration. The filename will include the current Unix timestamp to ensure
    proper sorting and execution order when running migrations.

    Guides: http://denalijs.org/master/guides/data/migrations/
  `;
MigrationBlueprint.params = '<name>';
exports.default = MigrationBlueprint;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL1VzZXJzL3NlYXdhdHRzL3NyYy9naXRodWIuY29tL3NlYXdhdHRzL2RlbmFsaS8iLCJzb3VyY2VzIjpbImJsdWVwcmludHMvbWlncmF0aW9uL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkNBQStDO0FBQy9DLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFFakM7Ozs7R0FJRztBQUNILHdCQUF3QyxTQUFRLHNCQUFTO0lBZ0J2RCxNQUFNLENBQUMsSUFBUztRQUNkLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDckIsTUFBTSxDQUFDLElBQUksRUFBRSw0Q0FBNEMsQ0FBQyxDQUFDO1FBQzNELElBQUksUUFBUSxHQUFHLEdBQUksTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBRSxJQUFLLElBQUssRUFBRSxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQztJQUM1QixDQUFDOztBQW5CRCwyQ0FBMkM7QUFDcEMsZ0NBQWEsR0FBRyxXQUFXLENBQUM7QUFDNUIsOEJBQVcsR0FBRyx1Q0FBdUMsQ0FBQztBQUN0RCxrQ0FBZSxHQUFHLG1CQUFNLENBQUE7Ozs7Ozs7R0FPOUIsQ0FBQztBQUVLLHlCQUFNLEdBQUcsUUFBUSxDQUFDO0FBZDNCLHFDQXVCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJsdWVwcmludCwgdW53cmFwIH0gZnJvbSAnZGVuYWxpLWNsaSc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCAqIGFzIGFzc2VydCBmcm9tICdhc3NlcnQnO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGRhdGFiYXNlIHNjaGVtYSBtaWdyYXRpb25cbiAqXG4gKiBAcGFja2FnZSBibHVlcHJpbnRzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pZ3JhdGlvbkJsdWVwcmludCBleHRlbmRzIEJsdWVwcmludCB7XG5cbiAgLyogdHNsaW50OmRpc2FibGU6Y29tcGxldGVkLWRvY3MgdHlwZWRlZiAqL1xuICBzdGF0aWMgYmx1ZXByaW50TmFtZSA9ICdtaWdyYXRpb24nO1xuICBzdGF0aWMgZGVzY3JpcHRpb24gPSAnR2VuZXJhdGVzIGEgZGF0YWJhc2Ugc2NoZW1hIG1pZ3JhdGlvbic7XG4gIHN0YXRpYyBsb25nRGVzY3JpcHRpb24gPSB1bndyYXBgXG4gICAgVXNhZ2U6IGRlbmFsaSBnZW5lcmF0ZSBtaWdyYXRpb24gPG5hbWU+IFtvcHRpb25zXVxuXG4gICAgR2VuZXJhdGVzIGEgbmV3IGJsYW5rIG1pZ3JhdGlvbi4gVGhlIGZpbGVuYW1lIHdpbGwgaW5jbHVkZSB0aGUgY3VycmVudCBVbml4IHRpbWVzdGFtcCB0byBlbnN1cmVcbiAgICBwcm9wZXIgc29ydGluZyBhbmQgZXhlY3V0aW9uIG9yZGVyIHdoZW4gcnVubmluZyBtaWdyYXRpb25zLlxuXG4gICAgR3VpZGVzOiBodHRwOi8vZGVuYWxpanMub3JnL21hc3Rlci9ndWlkZXMvZGF0YS9taWdyYXRpb25zL1xuICBgO1xuXG4gIHN0YXRpYyBwYXJhbXMgPSAnPG5hbWU+JztcblxuICBsb2NhbHMoYXJndjogYW55KSB7XG4gICAgbGV0IG5hbWUgPSBhcmd2Lm5hbWU7XG4gICAgYXNzZXJ0KG5hbWUsICdZb3UgbXVzdCBwcm92aWRlIGEgbmFtZSBmb3IgdGhpcyBtaWdyYXRpb24nKTtcbiAgICBsZXQgZmlsZW5hbWUgPSBgJHsgbW9tZW50KCkuZm9ybWF0KCdYJykgfS0keyBuYW1lIH1gO1xuICAgIHJldHVybiB7IG5hbWUsIGZpbGVuYW1lIH07XG4gIH1cblxufVxuIl19